package simulaattorinrunko5FX.src.view;

import javafx.scene.canvas.Canvas;
import javafx.scene.canvas.GraphicsContext;
import javafx.scene.paint.Color;

public class Visualisointi extends Canvas implements IVisualisointi{

	private GraphicsContext gc;
	
	double i = 140;
	double j = 215;
	double x = 140;
	double y = 415;
	double a = 430;
	double b = 115;
	
	
	//jatko: turvat layereihin, valitessa turvien määrä laittaa aina taustan eka päälle ja sit nii monta turvaa ku haluu nähä sen jälkee
	// varmaan siis siihe choiceboxin metodiin
	
	public Visualisointi(int w, int h) {
		super(w, h);
		gc = this.getGraphicsContext2D();
		tyhjennaNaytto();
	}
	

	public void tyhjennaNaytto() {
		gc.setFill(Color.AQUAMARINE);
		gc.fillRect(0, 0, this.getWidth(), this.getHeight());
		luoCheckinPisteet();
	}
	
	//Turvapisteiden määrän päivitys
	public void tyhjennaNaytto(int maara) {
		gc.setFill(Color.AQUAMARINE);
		gc.fillRect(0, 0, this.getWidth(), this.getHeight());
		luoCheckinPisteet();
		luoUITurvaPisteet(maara);
	}
	
	public void laukkuAsiakas() {
		gc.setFill(Color.DARKGREEN);
		gc.fillOval(i,j,20,20);
		
		i = (i - 20);
		//j = (j + 12) % this.getHeight();
		if (i <= 0) {
			i = 140;
			j += 20;
		}		
	}
	
	public void poistaLaukkuAsiakas() {
		if (i >= 140) {
			gc.setFill(Color.AQUAMARINE);
			gc.fillOval(i, j, 20, 20);
			i = 20;
			j -= 20;
		} else {
			gc.setFill(Color.AQUAMARINE);
			gc.fillOval(i, j, 20, 20);
			i += 20;
		}
	}
	
	public void laukutonAsiakas() {
		gc.setFill(Color.DARKGREEN);
		gc.fillOval(x,y,20,20);
		
		x = (x - 20);
		//j = (j + 12) % this.getHeight();
		if (x <= 0) {
			x = 140;
			y += 20;			
		}
	}
	
	public void poistaLaukutonAsiakas() {
		if (x >= 140) {
			gc.setFill(Color.AQUAMARINE);
			gc.fillOval(x, y, 20, 20);
			x = 20;
			y -= 20;
		} else {
			gc.setFill(Color.AQUAMARINE);
			gc.fillOval(x, y, 20, 20);
			x += 20;
		}
	}
	
	public void turva1Asiakas() {
		gc.setFill(Color.DARKGREEN);
		gc.fillOval(a,b,20,20);
		
		i = (a - 20);
		//j = (j + 12) % this.getHeight();
		if (a <= 290) {
			a = 430;
			b += 20;
		}		
	}
	
	public void poistaTurva1Asiakas() {
		if (a >= 430) {
			gc.setFill(Color.AQUAMARINE);
			gc.fillOval(a, b, 20, 20);
			a = 20;
			b -= 20;
		} else {
			gc.setFill(Color.AQUAMARINE);
			gc.fillOval(a, b, 20, 20);
			a += 20;
		}
	}
	
	public void luoCheckinPisteet() {
		gc.setFill(Color.BLACK);
		gc.fillRect(160, 200, 50, 50);
		gc.fillRect(160, 400, 50, 50);
		
		gc.setFill(Color.RED);
		gc.fillRect(450, 100, 50, 50);
	}
	
	public void luoUITurvaPisteet(int maara) {
		switch(maara) {
		case 0:
			gc.setFill(Color.RED);
			gc.fillRect(450, 100, 50, 50);
			gc.setFill(Color.AQUAMARINE);
			gc.fillRect(450, 200, 50, 50);
			gc.fillRect(450, 300, 50, 50);
			gc.fillRect(450, 400, 50, 50);
			gc.fillRect(450, 500, 50, 50);
			break;
		case 1:
			gc.setFill(Color.RED);
			gc.fillRect(450, 100, 50, 50);
			gc.fillRect(450, 200, 50, 50);
			gc.setFill(Color.AQUAMARINE);
			gc.fillRect(450, 300, 50, 50);
			gc.fillRect(450, 400, 50, 50);
			gc.fillRect(450, 500, 50, 50);
			break;
		case 2:
			gc.setFill(Color.RED);
			gc.fillRect(450, 100, 50, 50);
			gc.fillRect(450, 200, 50, 50);
			gc.fillRect(450, 300, 50, 50);
			gc.setFill(Color.AQUAMARINE);
			gc.fillRect(450, 400, 50, 50);
			gc.fillRect(450, 500, 50, 50);
			break;
		case 3:
			gc.setFill(Color.RED);
			gc.fillRect(450, 100, 50, 50);
			gc.fillRect(450, 200, 50, 50);
			gc.fillRect(450, 300, 50, 50);
			gc.fillRect(450, 400, 50, 50);
			gc.setFill(Color.AQUAMARINE);
			gc.fillRect(450, 500, 50, 50);
			break;
		case 4:
			gc.setFill(Color.RED);
			gc.fillRect(450, 100, 50, 50);
			gc.fillRect(450, 200, 50, 50);
			gc.fillRect(450, 300, 50, 50);
			gc.fillRect(450, 400, 50, 50);
			gc.fillRect(450, 500, 50, 50);
			break;
		}
	}
	
	public double getI() {
		return i;
	}
	
	public double getJ() {
		return j;
	}
	
	
}
